# üöÄ WebSocket Load Testing Lab

–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –ø–æ –Ω–∞–≥—Ä—É–∑–æ—á–Ω–æ–º—É —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ WebSocket —Å–µ—Ä–≤–µ—Ä–∞ –Ω–∞ Python.

## üìã –ß—Ç–æ –≤–Ω—É—Ç—Ä–∏?
*   **WebSocket –°–µ—Ä–≤–µ—Ä (`websocket.py`)**: –ü—Ä–æ—Å—Ç–æ–π –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä –Ω–∞ `websockets` + `asyncio`.
*   **Web UI Dashboard**: –ö—Ä–∞—Å–∏–≤–∞—è –ø–∞–Ω–µ–ª—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ (RPS, CPU, RAM, Connections) –Ω–∞ Flask.
*   **Artillery**: –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –Ω–∞–≥—Ä—É–∑–∫–∏ (DDOS-—Ç–µ—Å—Ç –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é).
*   **Docker Compose**: –í—Å—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–æ–¥–Ω–∏–º–∞–µ—Ç—Å—è –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π.

---

## üõ† –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å?

### 1. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
```bash
docker compose up --build -d server
```
–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –æ—Ç–∫—Ä–æ–π –≤ –±—Ä–∞—É–∑–µ—Ä–µ: **[http://127.0.0.1:5001](http://127.0.0.1:5001)**

### 2. –ê—Ç–∞–∫–∞! (–ó–∞–ø—É—Å–∫ –Ω–∞–≥—Ä—É–∑–∫–∏)
–í –æ—Ç–¥–µ–ª—å–Ω–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –∑–∞–ø—É—Å—Ç–∏ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä —Ç—Ä–∞—Ñ–∏–∫–∞:
```bash
docker compose --profile load up artillery
```
–°–º–æ—Ç—Ä–∏ –Ω–∞ –≥—Ä–∞—Ñ–∏–∫–∏ –≤ –±—Ä–∞—É–∑–µ—Ä–µ ‚Äî RPS (–∑–∞–ø—Ä–æ—Å—ã –≤ —Å–µ–∫—É–Ω–¥—É) –¥–æ–ª–∂–µ–Ω –ø–æ–ª–µ—Ç–µ—Ç—å –≤–≤–µ—Ä—Ö! üöÄ

---

## üéì –ó–∞–¥–∞–Ω–∏—è –¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç–æ–≤

### –£—Ä–æ–≤–µ–Ω—å 1: "–ú–æ–ª—á–∞–Ω–∏–µ ‚Äî –∑–æ–ª–æ—Ç–æ" (–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è I/O)
–°–µ–π—á–∞—Å —Å–µ—Ä–≤–µ—Ä –ø–∏—à–µ—Ç `print()` –Ω–∞ –∫–∞–∂–¥–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ. –û–ø–µ—Ä–∞—Ü–∏–∏ –≤–≤–æ–¥–∞-–≤—ã–≤–æ–¥–∞ (I/O) –≤ –∫–æ–Ω—Å–æ–ª—å ‚Äî –æ—á–µ–Ω—å –º–µ–¥–ª–µ–Ω–Ω—ã–µ –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ (–¥–∞–∂–µ –≤ asyncio –æ–Ω–∏ –º–æ–≥—É—Ç —Ç–æ—Ä–º–æ–∑–∏—Ç—å event loop).
1.  –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç –∏ –∑–∞—Ñ–∏–∫—Å–∏—Ä—É–π—Ç–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π RPS.
2.  **–ó–∞–¥–∞–Ω–∏–µ:** –£–¥–∞–ª–∏—Ç–µ –∏–ª–∏ –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –≤—Å–µ `print()` –≤–Ω—É—Ç—Ä–∏ —Ñ—É–Ω–∫—Ü–∏–∏ `handle`.
3.  –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç. –ù–∞—Å–∫–æ–ª—å–∫–æ –≤—ã—Ä–æ—Å RPS? –û–±—ä—è—Å–Ω–∏—Ç–µ –ø–æ—á–µ–º—É.

### –£—Ä–æ–≤–µ–Ω—å 2: "–ß–∞—Ç-–∫–æ–º–Ω–∞—Ç–∞" (Broadcasting)
–¢–µ–∫—É—â–∏–π —Å–µ—Ä–≤–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —Ä–µ–∂–∏–º–µ "–≠—Ö–æ" (–æ—Ç–≤–µ—á–∞–µ—Ç —Ç–æ–ª—å–∫–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—é).
1.  **–ó–∞–¥–∞–Ω–∏–µ:** –ò–∑–º–µ–Ω–∏—Ç–µ –∫–æ–¥ —Ç–∞–∫, —á—Ç–æ–±—ã –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏—è —Å–µ—Ä–≤–µ—Ä –ø–µ—Ä–µ—Å—ã–ª–∞–ª –µ–≥–æ **–≤—Å–µ–º** –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã–º –∫–ª–∏–µ–Ω—Ç–∞–º (—Ä–µ–∞–ª–∏–∑—É–π—Ç–µ –ø—Ä–æ—Å—Ç–æ–π —á–∞—Ç).
2.  –ó–∞–ø—É—Å—Ç–∏—Ç–µ –Ω–∞–≥—Ä—É–∑–∫—É. –ö–∞–∫ –∏–∑–º–µ–Ω–∏–ª–∞—Å—å –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ CPU –∏ —Å–µ—Ç—å –ø—Ä–∏ —Ç–æ–º –∂–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –≤—Ö–æ–¥—è—â–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π? (–ü–æ–¥—Å–∫–∞–∑–∫–∞: —Å–ª–æ–∂–Ω–æ—Å—Ç—å –≤–æ–∑—Ä–∞—Å—Ç–∞–µ—Ç —Å O(1) –¥–æ O(N)).

### –£—Ä–æ–≤–µ–Ω—å 3: "–§–µ–π—Å–∫–æ–Ω—Ç—Ä–æ–ª—å" (Rate Limiting)
–°–µ—Ä–≤–µ—Ä –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π, –ø–æ–∫–∞ –Ω–µ —É–ø–∞–¥–µ—Ç.
1.  **–ó–∞–¥–∞–Ω–∏–µ:** –î–æ–±–∞–≤—å—Ç–µ –ø—Ä–æ–≤–µ—Ä–∫—É: –µ—Å–ª–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π (`connections`) –±–æ–ª—å—à–µ 50, —Å–µ—Ä–≤–µ—Ä –¥–æ–ª–∂–µ–Ω –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ –∑–∞–∫—Ä—ã–≤–∞—Ç—å –Ω–æ–≤—ã–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å –∫–æ–¥–æ–º –æ—à–∏–±–∫–∏ (–∏–ª–∏ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å "Server busy").
2.  –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —ç—Ç–æ, –∏–∑–º–µ–Ω–∏–≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ `ws-load.yml` (—É–≤–µ–ª–∏—á—å—Ç–µ `arrivalRate` –∏–ª–∏ `rampTo`).

---

## üìä –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
*   –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å—ë: `docker compose down`
*   –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å (–µ—Å–ª–∏ –º–µ–Ω—è–ª–∏ –∫–æ–¥): `docker compose up --build -d server`
*   –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞: `docker compose logs -f server`
